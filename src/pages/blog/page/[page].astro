---
import type { Page, GetStaticPaths } from "astro";
import { type CollectionEntry, getCollection } from "astro:content";
import SiteBase from "@/layouts/SiteBase.astro";
import PostPreview from "@/components/blog/PostPreview.astro";


export const getStaticPaths: GetStaticPaths = async ({ paginate }) => {
  const blogPosts = await getCollection('blog'); 

  return paginate(blogPosts, {
    pageSize: 20,
  });
};

interface Props {
  page: Page<CollectionEntry<"blog">>;
}

const { page } = Astro.props;
---

<SiteBase title={ `Blog pÃ¡g ${page}` }>
  {
    page.data.map((post) => (
      <PostPreview 
        id={ post.id }
        title={ post.data.title }
        description={ post.data.description }
        pubDate={ post.data.pubDate }
        tags={ post.data.tags }
      />
    ))
  }
</SiteBase>
