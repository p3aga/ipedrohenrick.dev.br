@layer componets {
  .prose {
    --prose-base-color: var(--color-green-900);
    --prose-border-color: oklch(from var(--prose-base-color) l c h / 0.3);
    --prose-li-marker-color: oklch(from var(--prose-base-color) l c h / 0.5);
    --prose-bg-soft-color: oklch(from var(--prose-base-color) l c h / 0.1);


    & :is(h1,h2,h3,h4,h5,h6) {
      margin-top: calc(var(--spacing) * 8);
      margin-bottom: calc(var(--spacing) * 4);
    }

    & h2 {
      font-size: var(--text-2xl);
      font-weight: var(--font-weight-black);
    }
    
    & h3 {
      font-size: var(--text-xl);
      font-weight: var(--font-weight-bold);
    }
    
    & h4 {
      font-size: var(--text-lg);
      font-weight: var(--font-weight-bold);
    }
    
    & :is(h5,h6) {
      font-size: var(--text-base);
    }
    
    & h5 {
      font-weight: var(--font-weight-bold);
    }
    
    & h6 {
      font-weight: var(--font-weight-semibold);
    }

    & p {
      margin-bottom: calc(var(--spacing) * 4);
    }

    & hr {
      border-top-width: 1px;
      opacity: 0.3;
      margin-block: calc(var(--spacing) * 6);
    }

    & strong {
      font-weight: bold;
    }

    & :is(em,blockquote) {
      font-style: italic;
      font-family: var(--font-serif);
    };

    & blockquote {
      padding-inline-start: calc(var(--spacing) * 6);
      border-left: 1px solid var(--prose-border-color);

      & blockquote {
        border: none;
      }
    }

    & :is(ul,ol) {
      list-style-position: inside;
      margin-bottom: calc(var(--spacing) * 4);
      margin-inline-start: calc(var(--spacing) * 2);

      & :is(ul,ol) {
        margin-bottom: 0;
        margin-inline-start: calc(var(--spacing) * 4);
      }

      & li p {
        display: inline;
      }

      & li::marker {
        color: var(--prose-li-marker-color);
      }
    }

    & ul:not(.contains-task-list) {
      list-style-type: disc;
    }

    & ol {
      list-style-type: decimal;
    }

    & ul.contains-task-list {
      & li {
        display: flex;
        align-items: center;
      }

      & input[type="checkbox"] {
        appearance: none;
        position: relative;
        background-color: transparent;
        width: 0.9em;
        height: 0.9em;
        border: 1px solid var(--prose-base-color);
        border-radius: 2px;
        box-sizing: border-box;
        opacity: 0.5;
        margin-inline-end: calc(var(--spacing) * 2);

        &:checked::after {
          content: "âœ“";
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          font-size: 0.9em;
        }
      }
    }

    & .table-wrapper {
      overflow-x: scroll;

      & table {
        width: 100%;
        border: 1px solid var(--prose-border-color);
        border-radius: 4px;
        border-collapse: separate;
        border-spacing: 0;

        & :is(th,td) {
          border-bottom: 1px solid var(--prose-border-color);
          border-right: 1px solid var(--prose-border-color);
          padding: calc(var(--spacing) * 3) calc(var(--spacing) * 6);
          text-align: start;
          vertical-align: top;
        }

        & th {
          background-color: var(--prose-bg-soft-color);
        }

        & :is(th,td):last-child {
          border-right: none;
        }

        & tr:last-child {
          & td {
            border-bottom: none;
          }
        }
      }
    }

    & :is(code:not(pre code), kbd) {
      font-family: var(--font-mono);
      padding-inline: var(--spacing);
      background-color: var(--prose-bg-soft-color);
      border: 1px solid var(--prose-border-color);
      border-radius: 4px;
      box-sizing: border-box;
      white-space: nowrap;
    }

    & mark {
      background-color: color-mix(in oklch, var(--prose-base-color), transparent 80%);
      color: var(--prose-base-color);
      padding-inline: var(--spacing);
      font-weight: bold;
    }

    & sup {
      & a {
        margin-inline-start: calc(var(--spacing) / 2);
        margin-inline-end: var(--spacing);
        font-style: normal;

        &::after {
          content: "]";
        }

        &::before {
          content: "[";
        }
      }
    }

    & a {
      text-decoration: underline;
      text-decoration-color: var(--prose-border-color);
      transition: opacity 200ms;

      &:hover {
        opacity: 0.5;
      }
    }

    & .footnotes {
      border-top: 1px solid var(--prose-border-color);
      padding-top: calc(var(--spacing) * 6);
      margin-top: calc(var(--spacing) * 15);
      font-size: var(--text-sm);
    }

    & .expressive-code {
      margin-bottom: calc(var(--spacing) * 4);
    }
  }

  :where(.dark) .prose {
    --prose-base-color: var(--color-green-50);
  }
}
